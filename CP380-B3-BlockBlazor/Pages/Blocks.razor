@page "/blocks"

<!-- TODO: Add using and inject statements -->
@using CP380_B1_BlockList.Models;
@using CP380_B3_BlockBlazor.Data;
@inject BlockService _service


<h3>Blocks</h3>

@if (blocklist == null)
{
    <p><em>Loading...</em></p>
}
else
{
<div class="card-columns">


    <!-- TODO: Add cards for each block in the block list

               Each card should show:
                    - the position in the chain (starting at 0)
                    - the hash
                    - the nonce
                    - the previous hash
      -->

    @foreach (var Mov in blocklist)
    {
        <div class="column">
            <div class="content">

                <h3>@Mov.hash</h3>
                <p>@Mov.Nonce</p>
                <p>@Mov.PreviousHash </p>
            </div>
        </div>
    }

</div>
}

@code {
   private  IEnumerable<Blocks> blocklist;

    protected override async Task OnInitializedAsync()
    {
        // TODO: fetch blocks from the BlockService
        blocklist = await BlockService.GetBlocksAsync(DateTime.Now);

    }
}
